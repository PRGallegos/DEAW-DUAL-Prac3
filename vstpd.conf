# Habilitar el servicio FTP
listen=YES
listen_ipv6=NO

# Permitir conexiones de usuarios locales
local_enable=YES
write_enable=YES

# Enjaular a los usuarios locales en su directorio de inicio
chroot_local_user=YES
allow_writeable_chroot=YES

# Configuración de seguridad para FTPS
ssl_enable=YES
rsa_cert_file=/etc/ssl/certs/vsftpd.crt
rsa_private_key_file=/etc/ssl/private/vsftpd.key

# Obligar a usar SSL/TLS para datos y autenticación
force_local_data_ssl=YES
force_local_logins_ssl=YES

# Deshabilitar versiones antiguas de SSL
ssl_tlsv1=YES
ssl_sslv2=NO
ssl_sslv3=NO

# Configuración de cifrado seguro
require_ssl_reuse=NO
ssl_ciphers=HIGH

# Deshabilitar accesos anónimos
allow_anon_ssl=NO
anonymous_enable=NO

# Directorio raíz para usuarios locales (personaliza si es necesario)
local_root=/home/vagrant/ftp

# Limitar el número de conexiones simultáneas
pasv_min_port=30000
pasv_max_port=31000

# Límite de tiempo para conexiones
idle_session_timeout=300
data_connection_timeout=120

# Habilitar logs para depuración
xferlog_enable=YES
xferlog_file=/var/log/vsftpd.log
xferlog_std_format=YES
